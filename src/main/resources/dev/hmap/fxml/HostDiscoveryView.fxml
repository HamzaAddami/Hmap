<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.shape.Circle?>

<VBox spacing="25" styleClass="view-container" xmlns="http://javafx.com/javafx"
      xmlns:fx="http://javafx.com/fxml" fx:controller="dev.hmap.controller.HostDiscoveryController">

    <padding><Insets top="35" right="45" bottom="35" left="45"/></padding>

    <!-- Header -->
    <VBox spacing="10" styleClass="header-section">
        <HBox alignment="CENTER_LEFT" spacing="12">
            <Label text="ðŸŒ" styleClass="header-icon"/>
            <VBox spacing="4">
                <Label text="Network Discovery" styleClass="section-title"/>
                <Label text="Discover and monitor active devices on your network" styleClass="section-subtitle"/>
            </VBox>
        </HBox>
    </VBox>

    <!-- Search Bar -->
    <HBox spacing="12" alignment="CENTER_LEFT" styleClass="search-container">
        <VBox spacing="6" HBox.hgrow="ALWAYS">
            <Label text="Subnet (CIDR Notation)" styleClass="input-label-small"/>
            <TextField fx:id="cidrInput"
                       promptText="192.168.1.0/24"
                       styleClass="modern-input"/>
        </VBox>

        <VBox spacing="6" alignment="BOTTOM_LEFT">
            <Label text=" " styleClass="input-label-small"/>
            <HBox spacing="10">
                <Button fx:id="scanButton"
                        text="ðŸš€ Scan Network"
                        onAction="#handleScan"
                        styleClass="primary-btn"
                        prefWidth="150"/>
                <Button fx:id="stopScanButton"
                        text="ðŸ›‘ Stop"
                        onAction="#handleStopScan"
                        styleClass="danger-btn"
                        prefWidth="100"/>
                <Button fx:id="clearButton"
                        text="ðŸ—‘ï¸ Clear"
                        onAction="#handleClear"
                        styleClass="secondary-btn"
                        prefWidth="100"/>
            </HBox>
        </VBox>
    </HBox>

    <!-- Statistics -->
    <HBox spacing="15" styleClass="stats-grid">
        <VBox spacing="10" styleClass="stat-card" HBox.hgrow="ALWAYS">
            <HBox alignment="CENTER_LEFT" spacing="10">
                <Label text="ðŸ“Š" styleClass="stat-icon"/>
                <Label text="TOTAL" styleClass="stat-label"/>
            </HBox>
            <Label fx:id="totalDevicesLabel" text="0" styleClass="stat-value"/>
            <Label text="Discovered" styleClass="stat-hint"/>
        </VBox>

        <VBox spacing="10" styleClass="stat-card-success" HBox.hgrow="ALWAYS">
            <HBox alignment="CENTER_LEFT" spacing="10">
                <StackPane>
                    <Circle radius="6" styleClass="status-indicator-online"/>
                </StackPane>
                <Label text="ONLINE" styleClass="stat-label"/>
            </HBox>
            <Label fx:id="onlineDevicesLabel" text="0" styleClass="stat-value"/>
            <Label text="Active hosts" styleClass="stat-hint"/>
        </VBox>

        <VBox spacing="10" styleClass="stat-card" HBox.hgrow="ALWAYS">
            <HBox alignment="CENTER_LEFT" spacing="10">
                <Label text="ðŸ”" styleClass="stat-icon"/>
                <Label text="STATUS" styleClass="stat-label"/>
            </HBox>
            <Label fx:id="scanningLabel" text="Ready" styleClass="stat-status"/>
            <Label text="Scan state" styleClass="stat-hint"/>
        </VBox>
    </HBox>

    <!-- Table -->
    <VBox VBox.vgrow="ALWAYS" spacing="12" styleClass="table-wrapper">
        <HBox alignment="CENTER_LEFT" spacing="10">
            <Label text="Discovered Hosts" styleClass="table-title"/>
            <Region HBox.hgrow="ALWAYS"/>
            <Label text="Click 'Scan Ports' to analyze individual hosts" styleClass="table-hint"/>
        </HBox>

        <TableView fx:id="hostTable" styleClass="data-table" VBox.vgrow="ALWAYS">
            <columns>
                <TableColumn fx:id="ipColumn" text="IP ADDRESS" prefWidth="160"/>
                <TableColumn fx:id="macAddressColumn" text="MAC ADDRESS" prefWidth="180"/>
                <TableColumn fx:id="hostnameColumn" text="HOSTNAME" prefWidth="180"/>
                <TableColumn fx:id="statusColumn" text="STATUS" prefWidth="100"/>
                <TableColumn fx:id="osColumn" text="OS FAMILY" prefWidth="140"/>
                <TableColumn fx:id="latencyColumn" text="LATENCY" prefWidth="100"/>
                <TableColumn fx:id="actionColumn" text="ACTIONS" prefWidth="130"/>
            </columns>
            <columnResizePolicy>
                <TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/>
            </columnResizePolicy>
        </TableView>
    </VBox>

    <!-- Footer -->
    <HBox spacing="15" alignment="CENTER" styleClass="footer-container">
        <HBox alignment="CENTER_LEFT" spacing="8">
            <Label text="ðŸ’¡" styleClass="footer-icon"/>
            <Label fx:id="statusLabel" text="Ready to scan network" styleClass="status-label"/>
        </HBox>
        <Region HBox.hgrow="ALWAYS"/>
        <ProgressBar fx:id="progressBar" prefWidth="350" progress="0.0" styleClass="scan-progress"/>
    </HBox>

</VBox>